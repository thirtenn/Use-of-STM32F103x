![EXTI内部原理图](https://github.com/thirtenn/Use-of-STM32F103x/blob/main/dc7a80da866c6308e1786a9695e7eaa.jpg)

中断系统由NVIC中断控制系统进行控制，如果要使用GPIO进行外部中断，需要将GPIO引脚映射到EXTI，通过EXTI进入NVIC中断控制，如上图所示
所以进行外部中断的途径为：GPIO——>EXTI——>NVIC
EXTI中的边沿检测器共有19个，是组成EXTI的主体部分。

# 原理过程：

外部信号从输入线进入EXTI中，边沿电路受寄存器控制，经边沿检测电路检测，是否满足设置的条件（上升沿，下降沿，双边沿），满足则3号的“或”门打开。其中软件中断事件寄存器可无视外部电路是否触发直接进行触发。

信号来到4号门，若事件屏蔽寄存器打开（置为0），无论3号门是否触发都无法进行到下一步，达到屏蔽事件的效果。若置1，则信号一方面经过4号门，作用于脉冲发生器，对某些外设或其他功能进行触发。另一方面信号前往请求挂起寄存器（记录触发请求的数据，可以对其进行读取）。若挂起寄存器为1，则信号前往NVIC中断控制系统。

![EXTI与引脚关系图](https://github.com/thirtenn/Use-of-STM32F103x/blob/main/bd5d18868b473f7c2af0260ecddf848.jpg)
EXTI的外部中断/事件输入线共有19条，其中3条用于固定的用途，剩下16条可自己配置，`但每个输入端口只能有一个触发事件。`
外设端口引脚Pxy通过配置AFIO确定通过的路线，进入EXTI
